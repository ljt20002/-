---
name: release
description: 用于自动化项目的发布流程。它能分析当前代码与上一版本的差异，推荐符合语义化版本（SemVer）的版本号，并自动更新 package.json 和 CHANGELOG.md。当用户提到“发布”、“版本”、“release”或“更新版本”时使用。
---

# 发布管理技能 (Release Management)

本技能旨在简化项目的版本发布过程，利用 AI 分析变更并自动化重复性任务。

## 核心功能

1.  **差异分析**：自动对比当前工作区与上一个 Git 标签（Tag）之间的代码和提交记录。
2.  **版本推荐**：根据变更的影响范围（破坏性变更、新功能、修复）推荐 Major、Minor 或 Patch 版本。
3.  **自动更新**：更新 `package.json` 中的版本号。
4.  **日志生成**：在 `CHANGELOG.md` 中生成结构化的中文变更记录。
5.  **全自动 Git 闭环**：在用户确认后，主动生成包含变更摘要的 `git commit`、`git tag` 和 `git push`。

## 使用流程

1.  **触发**：当用户请求发布新版本时启动。
2.  **分析与建议**：查看提交记录和差异，拟定版本号和更新日志摘要。
3.  **交互确认 (Approval First)**：向用户展示建议内容及拟执行命令。在获得明确批准前，严禁修改任何物理文件。
4.  **全自动执行**：批准后，一键完成文件更新、内容校验、本地提交、打标签和远程推送。

## 注意事项

-   在执行前请确保所有重要的变更已提交或处于可发布状态。
-   **安全确认**：虽然流程是全自动的，但 AI **必须**在执行任何 Git 提交或推送前获得用户的明确授权。
